# Руководство по работе с контролем версий

## Первоначальная настройка git

* `git --version` — проверка установленного git и вывод номера версии;
* `git config --global user.name <name>` — задать глобальное имя пользователя (для всех репозиториев);
* `git config --global user.email <email>` — задать e-mail пользователя (для всех репозиториев);
* `git config --global init.defaultBranch main` — задать имя главной ветки по умолчанию для всех репозиториев.

## Базовые команды работы с репозиторием

* `git init` — инициализировать репозиторий в текущей директории;
* `git status` — показать текущую ветку и статусы файлов, измененённых/добавленных/удалённых с момента последнего коммита;
* `git status -u` — в явном виде указать, чтобы в статусе отобразились неотслеживаемые файлы, если по умолчанию в git настроено их игнорирование;
* `git add <file>` — добавить новый файл к отслеживанию или зафиксировать (добавить к индексу) изменённый файл для следующего коммита;
* `git commit -m "message"` — выполнить коммит, указав комментарий;
* `git log` — посмотреть журнал коммитов;
* `git checkout <commit>` — перейти к какой-либо версии, можно указывать первые 4 символа хеш-кода;
* `git diff` — показать отличия текущих файлов от последнего коммита.

---
![Working tree, staging area, and Git directory](https://git-scm.com/book/en/v2/images/areas.png)

## Статусы файлов
* U — untracked
* A — added
* M — modified
* D — deleted
* R — renamed (отображается, когда в индекс добавлен файл и с новым, и со старым именем)

---
![The lifecycle of the status of your files](https://git-scm.com/book/en/v2/images/lifecycle.png)


## Ветвление в git

* `git branch` — показать список веток;
* `git branch <branch>` — создать новую ветку, указав её имя;
* `git checkout <branch>` — переключиться на указанную ветку;
* `git merge <branch>` — слияние указанной ветки с текущей;
* `git branch -d <branch>` — удаление ветки (черновика) после слияния.


## Работа с удалёнными репозиториями

* `git clone <url>` — полностью скопировать удалённый репозиторий в текущую папку;
* `git remote add origin <url>` — связать локальный репозиторий с удалённым, задав имя `origin`;
* `git branch -M main` — явно задать имя основной ветки `main`;
* `git push -u origin main` — отправить все изменения в удалённый репозиторий, связав локальную ветку `main` с веткой `main` удалённого репозитория `origin`;
* `git push` — отправить изменения в уже привязанный репозиторий;
* `git pull` — получить все изменения из удалённого репозитория с попыткой слияния веток;
* `git push --set-upstream origin <branch>` — указать, что для локальной ветки нужно создать такую же с указанным именем в удалённом репозитории `origin` (`--set-upstream` — аналог ключа `-u`, длинный вариант той же команды).


## Полезные ссылки
Актуальная версия книги Pro Git на [английском](https://git-scm.com/book/en/v2) и [русском](https://git-scm.com/book/ru).

---
_"I’m very happy with git. It works remarkably well for the kernel and is still meeting all my expectations."
— Linus Torvalds_
---
